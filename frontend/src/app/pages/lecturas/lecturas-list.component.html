<div class="container">
  <h1 class="page-title">Lecturas</h1>

  <div class="card section">

    <!-- Barra superior -->
    <div class="toolbar">
      <mat-form-field appearance="outline" class="medidor-input">
        <mat-label>ID de medidor</mat-label>
        <input matInput type="number" [(ngModel)]="idMedidor" />
      </mat-form-field>

      <div class="btn-row">
        <button mat-flat-button color="primary" (click)="buscar()">
          <mat-icon>search</mat-icon> Buscar
        </button>

        <a mat-flat-button color="accent" routerLink="/lecturas/nueva">
          <mat-icon>add</mat-icon> Nueva lectura
        </a>
      </div>
    </div>

    <!-- Tabla -->
    <table mat-table [dataSource]="data" class="mat-mdc-table table--lecturas">

      <!-- Fecha -->
      <ng-container matColumnDef="fecha">
        <th mat-header-cell *matHeaderCellDef>Fecha</th>
        <td mat-cell *matCellDef="let l">
          {{ l.created_at ? (l.created_at | date:'dd/MM/yyyy') : '-' }}
        </td>
      </ng-container>

      <!-- Lectura -->
      <ng-container matColumnDef="lectura">
        <th mat-header-cell *matHeaderCellDef>Lectura (kWh)</th>
        <td mat-cell *matCellDef="let l">{{ l.lectura_kwh }}</td>
      </ng-container>

      <!-- Observación -->
      <ng-container matColumnDef="observacion">
        <th mat-header-cell *matHeaderCellDef>Observación</th>
        <td mat-cell *matCellDef="let l">{{ l.observacion || '-' }}</td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let r; columns: displayedColumns;"></tr>
    </table>

    <!-- Mensaje cuando no hay datos -->
    <p *ngIf="!data?.length" class="empty">
      No hay lecturas registradas para este medidor.
    </p>

  </div>
</div>
