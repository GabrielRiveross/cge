<div class="container">
  <h1 class="page-title">Lecturas</h1>

  <div class="card section">
    <div class="toolbar">
      <mat-form-field appearance="outline" style="width:240px; flex:0 0 240px">
        <mat-label>ID de medidor</mat-label>
        <input matInput type="number" [(ngModel)]="idMedidor"/>
      </mat-form-field>

      <div class="btn-row">
        <button mat-flat-button color="primary" (click)="buscar()">Buscar</button>
        <!-- Búsqueda por código (opcional, la dejo comentada como tenías)
        <mat-form-field appearance="outline" style="width: 240px;">
          <mat-label>Código medidor</mat-label>
          <input matInput [(ngModel)]="codigo"/>
        </mat-form-field>
        <button mat-stroked-button (click)="buscarPorCodigo()">Por código</button>
        -->
        <a mat-flat-button color="accent" routerLink="/lecturas/nueva">Nueva lectura</a>
      </div>
    </div>

    <table mat-table [dataSource]="data" class="mat-mdc-table">
      <ng-container matColumnDef="fecha">
        <th mat-header-cell *matHeaderCellDef>Fecha</th>
        <td mat-cell *matCellDef="let l">{{ l.fecha_lectura | date:'yyyy-MM-dd' }}</td>
      </ng-container>

      <ng-container matColumnDef="lectura">
        <th mat-header-cell *matHeaderCellDef>Lectura</th>
        <td mat-cell *matCellDef="let l">{{ l.lectura_actual }}</td>
      </ng-container>

      <ng-container matColumnDef="observacion">
        <th mat-header-cell *matHeaderCellDef>Observación</th>
        <td mat-cell *matCellDef="let l">{{ l.observacion }}</td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let r; columns: displayedColumns;"></tr>
    </table>

    <p *ngIf="!data?.length" class="empty">No hay lecturas para ese medidor.</p>
  </div>
</div>
